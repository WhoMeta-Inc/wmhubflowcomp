<script total>

	exports.id = 'date';
	exports.name = 'Date';
	exports.group = 'Triggers';
	exports.icon = 'ti ti-calendar';
	exports.author = 'Total.js';
	exports.version = '1';
	exports.config = {};
	exports.inputs = [{ id: 'input', name: 'Trigger' }];
	exports.outputs = [{ id: 'output', name: 'Date/Time' }];
	exports.kind = 'trigger';

	exports.make = function(instance, config) {

		var makedate = function() {
			var dt = new Date();
			return config.format ? dt.format(config.format) : dt;
		};

		instance.message = function($) {
			$.send('output', makedate());
		};

		instance.trigger = function() {
			instance.send('output', makedate());
		};

	};

</script>

<readme>
The component will return a Date/Time object (raw or formatted) according to its configuration.
</readme>

<settings>
	<div class="padding">
		<ui-component name="input" path="?.format" config="placeholder:yyyy-MM-dd HH\:mm\:ss">Date format</ui-component>
		<div class="help">Empty value will return current <code>datetime</code> object.</div>
		<hr />
		<p>
			d - day e.g. 1<br>
			dd - day e.g. 01<br>
			ddd - day (named). MO<br>
			dddd - day (named). Monday<br>
			M - month e.g. 1<br>
			MM - month e.g. 01<br>
			MMM - month (named). Jan<br>
			MMMM - month (named). January<br>
			yy - year e.g. 16<br>
			yyyy - year e.g. 2016<br>
			w - week number e.g. 1<br>
			ww - week number e.g. 01<br>
			H - hour e.g. 1<br>
			HH - hour e.g. 01<br>
			m - minute e.g. 1<br>
			mm - minute e.g. 01<br>
			s - second e.g. 1<br>
			ss - second e.g. 01<br>
			a - AM/PM
		</p>
	</div>
</settings>

<style>
	.CLASS .padding { padding: 0 10px 10px; }
	.CLASS button { width: 100%; height: 24px; border: 1px solid #E0E0E0; border-radius: var(--radius); color: #000; background-color: #F0F0F0; margin: 0; }
	.CLASS button:hover { background-color: #F8F8F8; }
	.CLASS button:active { background-color: #E0E0E0; }
	.CLASS footer { padding: 10px; font-size: 12px; }

	.ui-dark .CLASS button { border-color: #404040; color: #FFF; background-color: #222; }
	.ui-dark .CLASS button:hover { background-color: #303030; }
	.ui-dark .CLASS button:active { background-color: #404040; }
</style>

<body>
	<header>
		<i class="ICON"></i>NAME
	</header>
	<div class="padding">
		<button class="exec" data-exec="FUNC.trigger">Run</button>
	</div>
	<footer is="is-footer" path="CONFIG.format" config="text;show"></footer>
</body>